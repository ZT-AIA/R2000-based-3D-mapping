; generated by Component: ARM Compiler 5.06 update 2 (build 183) Tool: ArmCC [4d35cd]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\discovery\dev.o --asm_dir=.\Discovery\ --list_dir=.\Discovery\ --depend=.\discovery\dev.d --cpu=Cortex-M4.fp --apcs=interwork -O0 --diag_suppress=9931 -I..\inc -I..\src -I..\..\libraries\CMSIS\Include -I..\..\libraries\CMSIS\Device\ST\STM32F4xx\Include -I..\..\libraries\STM32F4x7_ETH_Driver\inc -I..\..\libraries\STM32F4xx_StdPeriph_Driver\inc -I..\..\libraries\STM32F4-Discovery -I..\..\libraries\lwip-1.4.1\port\STM32F4x7 -I..\..\libraries\lwip-1.4.1\src\include -I..\..\libraries\lwip-1.4.1\src\include\ipv4 -I..\..\libraries\lwip-1.4.1\src\include\lwip -I..\..\libraries\lwip-1.4.1\src\include\netif -I..\..\libraries\lwip-1.4.1\port\STM32F4x7\arch -I..\..\libraries\rtx-v4.73\INC -I..\..\libraries\rtx-v4.73\SRC -I..\..\libraries\ptpd-2.0.0\src -I..\inc\system -I..\inc\laser -I..\inc\motorCtrl -I..\..\libraries\lwip-1.4.1\src\include\ipv4\lwip -Id:\Keil_v5\ARM\RV31\INC -Id:\Keil_v5\ARM\CMSIS\Include -Id:\Keil_v5\ARM\Inc\ST\STM32F4xx -D__MICROLIB -D__UVISION_VERSION=520 -DSTM32F40_41xxx -DUSE_STDPERIPH_DRIVER -D__CORTEX_M4F -D__FPU_PRESENT -D__CMSIS_RTOS -DSTM32F40_41xxx --omf_browse=.\discovery\dev.crf ..\src\laser\dev.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  NVIC_SetPriority PROC
;;;1155    */
;;;1156   static __INLINE void NVIC_SetPriority(IRQn_Type IRQn, uint32_t priority)
000000  b510              PUSH     {r4,lr}
;;;1157   {
;;;1158     if(IRQn < 0) {
000002  2800              CMP      r0,#0
000004  da07              BGE      |L1.22|
;;;1159       SCB->SHP[((uint32_t)(IRQn) & 0xF)-4] = ((priority << (8 - __NVIC_PRIO_BITS)) & 0xff); } /* set Priority for Cortex-M  System Interrupts */
000006  070a              LSLS     r2,r1,#28
000008  0e14              LSRS     r4,r2,#24
00000a  4afe              LDR      r2,|L1.1028|
00000c  f000030f          AND      r3,r0,#0xf
000010  1f1b              SUBS     r3,r3,#4
000012  54d4              STRB     r4,[r2,r3]
000014  e003              B        |L1.30|
                  |L1.22|
;;;1160     else {
;;;1161       NVIC->IP[(uint32_t)(IRQn)] = ((priority << (8 - __NVIC_PRIO_BITS)) & 0xff);    }        /* set Priority for device specific Interrupts  */
000016  070a              LSLS     r2,r1,#28
000018  0e13              LSRS     r3,r2,#24
00001a  4afb              LDR      r2,|L1.1032|
00001c  5413              STRB     r3,[r2,r0]
                  |L1.30|
;;;1162   }
00001e  bd10              POP      {r4,pc}
;;;1163   
                          ENDP

                  usart1_Init PROC
;;;6      /* USART1 */
;;;7      static void usart1_Init(void)
000020  b500              PUSH     {lr}
;;;8      {
000022  b087              SUB      sp,sp,#0x1c
;;;9      	GPIO_InitTypeDef GPIO_InitStructure;
;;;10     	USART_InitTypeDef USART_InitStructure;
;;;11     	
;;;12     	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA,  ENABLE);
000024  2101              MOVS     r1,#1
000026  4608              MOV      r0,r1
000028  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;13     	RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);
00002c  2101              MOVS     r1,#1
00002e  2010              MOVS     r0,#0x10
000030  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;14     	/* usart1 GPIO configuration(PA9 & PA10) */
;;;15     	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_25MHz;
000034  2001              MOVS     r0,#1
000036  f88d0019          STRB     r0,[sp,#0x19]
;;;16     	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
00003a  2002              MOVS     r0,#2
00003c  f88d0018          STRB     r0,[sp,#0x18]
;;;17     	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
000040  2000              MOVS     r0,#0
000042  f88d001a          STRB     r0,[sp,#0x1a]
;;;18     	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
000046  2001              MOVS     r0,#1
000048  f88d001b          STRB     r0,[sp,#0x1b]
;;;19     	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9 | GPIO_Pin_10;
00004c  f44f60c0          MOV      r0,#0x600
000050  9005              STR      r0,[sp,#0x14]
;;;20     	GPIO_Init(GPIOA, &GPIO_InitStructure);
000052  a905              ADD      r1,sp,#0x14
000054  48ed              LDR      r0,|L1.1036|
000056  f7fffffe          BL       GPIO_Init
;;;21     	GPIO_PinAFConfig(GPIOA,GPIO_PinSource9, GPIO_AF_USART1);
00005a  2207              MOVS     r2,#7
00005c  2109              MOVS     r1,#9
00005e  48eb              LDR      r0,|L1.1036|
000060  f7fffffe          BL       GPIO_PinAFConfig
;;;22       GPIO_PinAFConfig(GPIOA,GPIO_PinSource10,GPIO_AF_USART1);
000064  2207              MOVS     r2,#7
000066  210a              MOVS     r1,#0xa
000068  48e8              LDR      r0,|L1.1036|
00006a  f7fffffe          BL       GPIO_PinAFConfig
;;;23     	/* usart1 parameters configuration */
;;;24     	USART_InitStructure.USART_BaudRate = USART1_BR;   
00006e  f44f20e1          MOV      r0,#0x70800
000072  9001              STR      r0,[sp,#4]
;;;25     	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
000074  2000              MOVS     r0,#0
000076  f8ad0008          STRH     r0,[sp,#8]
;;;26     	USART_InitStructure.USART_StopBits = USART_StopBits_1;
00007a  f8ad000a          STRH     r0,[sp,#0xa]
;;;27     	USART_InitStructure.USART_Parity = USART_Parity_No;
00007e  f8ad000c          STRH     r0,[sp,#0xc]
;;;28     	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
000082  200c              MOVS     r0,#0xc
000084  f8ad000e          STRH     r0,[sp,#0xe]
;;;29     	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
000088  2000              MOVS     r0,#0
00008a  f8ad0010          STRH     r0,[sp,#0x10]
;;;30     	USART_Init(USART1, &USART_InitStructure);
00008e  a901              ADD      r1,sp,#4
000090  48df              LDR      r0,|L1.1040|
000092  f7fffffe          BL       USART_Init
;;;31     	USART_ClearFlag(USART1, USART_FLAG_RXNE);
000096  2120              MOVS     r1,#0x20
000098  48dd              LDR      r0,|L1.1040|
00009a  f7fffffe          BL       USART_ClearFlag
;;;32     	USART_ITConfig(USART1, USART_IT_RXNE, ENABLE);
00009e  2201              MOVS     r2,#1
0000a0  f2405125          MOV      r1,#0x525
0000a4  48da              LDR      r0,|L1.1040|
0000a6  f7fffffe          BL       USART_ITConfig
;;;33     	NVIC_SetPriority(USART1_IRQn, USART1_PRIO);
0000aa  2104              MOVS     r1,#4
0000ac  2025              MOVS     r0,#0x25
0000ae  f7fffffe          BL       NVIC_SetPriority
;;;34     	NVIC_EnableIRQ(USART1_IRQn);
0000b2  2025              MOVS     r0,#0x25
0000b4  f7fffffe          BL       NVIC_EnableIRQ
;;;35     
;;;36     	USART_Cmd(USART1, ENABLE);
0000b8  2101              MOVS     r1,#1
0000ba  48d5              LDR      r0,|L1.1040|
0000bc  f7fffffe          BL       USART_Cmd
;;;37     }
0000c0  b007              ADD      sp,sp,#0x1c
0000c2  bd00              POP      {pc}
;;;38     
                          ENDP

                  usart3_Init PROC
;;;39     /* USART3 */
;;;40     static void usart3_Init(void)
0000c4  b500              PUSH     {lr}
;;;41     {
0000c6  b087              SUB      sp,sp,#0x1c
;;;42     	GPIO_InitTypeDef GPIO_InitStructure;
;;;43     	USART_InitTypeDef USART_InitStructure;
;;;44     	
;;;45     	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOD,  ENABLE);
0000c8  2101              MOVS     r1,#1
0000ca  2008              MOVS     r0,#8
0000cc  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;46     	RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3, ENABLE);
0000d0  2101              MOVS     r1,#1
0000d2  0488              LSLS     r0,r1,#18
0000d4  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;47     	/* Usart1 GPIO configuration(PD8 & PD9) */
;;;48     	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_25MHz;
0000d8  2001              MOVS     r0,#1
0000da  f88d0019          STRB     r0,[sp,#0x19]
;;;49     	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
0000de  2002              MOVS     r0,#2
0000e0  f88d0018          STRB     r0,[sp,#0x18]
;;;50     	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
0000e4  2000              MOVS     r0,#0
0000e6  f88d001a          STRB     r0,[sp,#0x1a]
;;;51     	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
0000ea  2001              MOVS     r0,#1
0000ec  f88d001b          STRB     r0,[sp,#0x1b]
;;;52     	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8 | GPIO_Pin_9;
0000f0  f44f7040          MOV      r0,#0x300
0000f4  9005              STR      r0,[sp,#0x14]
;;;53     	GPIO_Init(GPIOD, &GPIO_InitStructure);
0000f6  a905              ADD      r1,sp,#0x14
0000f8  48c6              LDR      r0,|L1.1044|
0000fa  f7fffffe          BL       GPIO_Init
;;;54     	GPIO_PinAFConfig(GPIOD,GPIO_PinSource8,GPIO_AF_USART3);
0000fe  2207              MOVS     r2,#7
000100  2108              MOVS     r1,#8
000102  48c4              LDR      r0,|L1.1044|
000104  f7fffffe          BL       GPIO_PinAFConfig
;;;55       GPIO_PinAFConfig(GPIOD,GPIO_PinSource9,GPIO_AF_USART3);
000108  2207              MOVS     r2,#7
00010a  2109              MOVS     r1,#9
00010c  48c1              LDR      r0,|L1.1044|
00010e  f7fffffe          BL       GPIO_PinAFConfig
;;;56     	/* Uart3 parameters configuration */
;;;57     	USART_InitStructure.USART_BaudRate = USART3_BR;   
000112  f44f30e1          MOV      r0,#0x1c200
000116  9001              STR      r0,[sp,#4]
;;;58     	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
000118  2000              MOVS     r0,#0
00011a  f8ad0008          STRH     r0,[sp,#8]
;;;59     	USART_InitStructure.USART_StopBits = USART_StopBits_1;
00011e  f8ad000a          STRH     r0,[sp,#0xa]
;;;60     	USART_InitStructure.USART_Parity = USART_Parity_No;
000122  f8ad000c          STRH     r0,[sp,#0xc]
;;;61     	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
000126  200c              MOVS     r0,#0xc
000128  f8ad000e          STRH     r0,[sp,#0xe]
;;;62     	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
00012c  2000              MOVS     r0,#0
00012e  f8ad0010          STRH     r0,[sp,#0x10]
;;;63     	USART_Init(USART3, &USART_InitStructure);
000132  a901              ADD      r1,sp,#4
000134  48b8              LDR      r0,|L1.1048|
000136  f7fffffe          BL       USART_Init
;;;64     	USART_ClearFlag(USART3, USART_FLAG_RXNE);
00013a  2120              MOVS     r1,#0x20
00013c  48b6              LDR      r0,|L1.1048|
00013e  f7fffffe          BL       USART_ClearFlag
;;;65     	USART_ITConfig(USART3, USART_IT_RXNE, ENABLE);
000142  2201              MOVS     r2,#1
000144  f2405125          MOV      r1,#0x525
000148  48b3              LDR      r0,|L1.1048|
00014a  f7fffffe          BL       USART_ITConfig
;;;66     	NVIC_SetPriority(USART3_IRQn, USART3_PRIO);
00014e  2105              MOVS     r1,#5
000150  2027              MOVS     r0,#0x27
000152  f7fffffe          BL       NVIC_SetPriority
;;;67     	NVIC_EnableIRQ(USART3_IRQn);
000156  2027              MOVS     r0,#0x27
000158  f7fffffe          BL       NVIC_EnableIRQ
;;;68     
;;;69     	USART_Cmd(USART3, ENABLE);
00015c  2101              MOVS     r1,#1
00015e  48ae              LDR      r0,|L1.1048|
000160  f7fffffe          BL       USART_Cmd
;;;70     }
000164  b007              ADD      sp,sp,#0x1c
000166  bd00              POP      {pc}
;;;71     
                          ENDP

                  Timer7Init PROC
;;;72     /* Timer7 is configured for time_based delimit */
;;;73     static void Timer7Init(void)
000168  b50e              PUSH     {r1-r3,lr}
;;;74     {
;;;75     	TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;
;;;76     	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM7, ENABLE);
00016a  2101              MOVS     r1,#1
00016c  2020              MOVS     r0,#0x20
00016e  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;77     	TIM_TimeBaseStructure.TIM_Period 	= 0xffffu;
000172  f64f70ff          MOV      r0,#0xffff
000176  9001              STR      r0,[sp,#4]
;;;78     	TIM_TimeBaseStructure.TIM_Prescaler = 167u;   // 200KHz
000178  20a7              MOVS     r0,#0xa7
00017a  f8ad0000          STRH     r0,[sp,#0]
;;;79     	TIM_TimeBaseStructure.TIM_ClockDivision = TIM_CKD_DIV1;
00017e  2000              MOVS     r0,#0
000180  f8ad0008          STRH     r0,[sp,#8]
;;;80     	TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;
000184  f8ad0002          STRH     r0,[sp,#2]
;;;81     	TIM_TimeBaseStructure.TIM_RepetitionCounter = 0;
000188  f88d000a          STRB     r0,[sp,#0xa]
;;;82     	TIM_TimeBaseInit(TIM7, &TIM_TimeBaseStructure);
00018c  4669              MOV      r1,sp
00018e  48a3              LDR      r0,|L1.1052|
000190  f7fffffe          BL       TIM_TimeBaseInit
;;;83     	//TIM_SelectOnePulseMode(TIM7, TIM_OPMode_Single);
;;;84     	TIM_Cmd(TIM7, ENABLE);
000194  2101              MOVS     r1,#1
000196  48a1              LDR      r0,|L1.1052|
000198  f7fffffe          BL       TIM_Cmd
;;;85     }
00019c  bd0e              POP      {r1-r3,pc}
;;;86     
                          ENDP

                  Timer6Init PROC
;;;87     /* Timer6 is configured for accurate delay */
;;;88     static void Timer6Init(void)
00019e  b50e              PUSH     {r1-r3,lr}
;;;89     {
;;;90     	TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;
;;;91     	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM6, ENABLE);
0001a0  2101              MOVS     r1,#1
0001a2  2010              MOVS     r0,#0x10
0001a4  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;92     	TIM_TimeBaseStructure.TIM_Period 	= 0xffffu;
0001a8  f64f70ff          MOV      r0,#0xffff
0001ac  9001              STR      r0,[sp,#4]
;;;93     	TIM_TimeBaseStructure.TIM_Prescaler = 0;
0001ae  2000              MOVS     r0,#0
0001b0  f8ad0000          STRH     r0,[sp,#0]
;;;94     	TIM_TimeBaseStructure.TIM_ClockDivision = TIM_CKD_DIV1;
0001b4  f8ad0008          STRH     r0,[sp,#8]
;;;95     	TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;
0001b8  f8ad0002          STRH     r0,[sp,#2]
;;;96     	TIM_TimeBaseStructure.TIM_RepetitionCounter = 0;
0001bc  f88d000a          STRB     r0,[sp,#0xa]
;;;97     	TIM_TimeBaseInit(TIM6, &TIM_TimeBaseStructure);
0001c0  4669              MOV      r1,sp
0001c2  4897              LDR      r0,|L1.1056|
0001c4  f7fffffe          BL       TIM_TimeBaseInit
;;;98     	TIM_Cmd(TIM6, ENABLE);
0001c8  2101              MOVS     r1,#1
0001ca  4895              LDR      r0,|L1.1056|
0001cc  f7fffffe          BL       TIM_Cmd
;;;99     }
0001d0  bd0e              POP      {r1-r3,pc}
;;;100    
                          ENDP

                  Delay_ns PROC
;;;103     */
;;;104    void Delay_ns(uint32_t dly)
0001d2  ee000a10          VMOV     s0,r0
;;;105    {
;;;106    	uint32_t timer_cnt;
;;;107    	dly /= 11.904762f;
0001d6  eeb80a40          VCVT.F32.U32 s0,s0
0001da  eddf0a92          VLDR     s1,|L1.1060|
0001de  ee801a20          VDIV.F32 s2,s0,s1
0001e2  eebc0ac1          VCVT.U32.F32 s0,s2
0001e6  ee100a10          VMOV     r0,s0
;;;108    	timer_cnt = TIM6->CNT;
0001ea  4a8d              LDR      r2,|L1.1056|
0001ec  6a51              LDR      r1,[r2,#0x24]
;;;109    	while((TIM6->CNT - timer_cnt) < dly);
0001ee  bf00              NOP      
                  |L1.496|
0001f0  4a8b              LDR      r2,|L1.1056|
0001f2  6a52              LDR      r2,[r2,#0x24]
0001f4  1a52              SUBS     r2,r2,r1
0001f6  4282              CMP      r2,r0
0001f8  d3fa              BCC      |L1.496|
;;;110    }
0001fa  4770              BX       lr
;;;111    void Delay_ms(uint32_t dly)
                          ENDP

                  Delay_ms PROC
0001fc  b500              PUSH     {lr}
;;;112    {
0001fe  4603              MOV      r3,r0
;;;113    	while(dly--)
000200  e005              B        |L1.526|
                  |L1.514|
;;;114    	{
;;;115    		Delay_ns(500000);
000202  4889              LDR      r0,|L1.1064|
000204  f7fffffe          BL       Delay_ns
;;;116    		Delay_ns(500000);
000208  4887              LDR      r0,|L1.1064|
00020a  f7fffffe          BL       Delay_ns
                  |L1.526|
00020e  1e18              SUBS     r0,r3,#0              ;113
000210  f1a30301          SUB      r3,r3,#1              ;113
000214  d1f5              BNE      |L1.514|
;;;117    	}
;;;118    }
000216  bd00              POP      {pc}
;;;119    
                          ENDP

                  PWMInit PROC
;;;127     */
;;;128    static void PWMInit(void)
000218  b500              PUSH     {lr}
;;;129    {
00021a  b08b              SUB      sp,sp,#0x2c
;;;130    	TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;
;;;131    	TIM_OCInitTypeDef TIM_OCInitStructure;
;;;132    	GPIO_InitTypeDef GPIO_InitStructure;
;;;133    	
;;;134    	RCC_APB2PeriphClockCmd(RCC_APB2Periph_TIM1,  ENABLE);
00021c  2101              MOVS     r1,#1
00021e  4608              MOV      r0,r1
000220  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;135    	RCC_APB2PeriphClockCmd(RCC_APB2Periph_TIM8,  ENABLE);
000224  2101              MOVS     r1,#1
000226  2002              MOVS     r0,#2
000228  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;136    	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);
00022c  2101              MOVS     r1,#1
00022e  4608              MOV      r0,r1
000230  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;137    	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOC, ENABLE);
000234  2101              MOVS     r1,#1
000236  2004              MOVS     r0,#4
000238  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;138    	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOD, ENABLE);
00023c  2101              MOVS     r1,#1
00023e  2008              MOVS     r0,#8
000240  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;139    	
;;;140    	/* Set the specified gpio configuration */
;;;141    	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_25MHz;
000244  2001              MOVS     r0,#1
000246  f88d0009          STRB     r0,[sp,#9]
;;;142    	GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_OUT;
00024a  f88d0008          STRB     r0,[sp,#8]
;;;143    	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
00024e  2000              MOVS     r0,#0
000250  f88d000a          STRB     r0,[sp,#0xa]
;;;144    	GPIO_InitStructure.GPIO_PuPd  = GPIO_PuPd_DOWN;
000254  2002              MOVS     r0,#2
000256  f88d000b          STRB     r0,[sp,#0xb]
;;;145    	
;;;146    	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0 | GPIO_Pin_10 | GPIO_Pin_11;
00025a  f6404001          MOV      r0,#0xc01
00025e  9001              STR      r0,[sp,#4]
;;;147    	GPIO_Init(GPIOD, &GPIO_InitStructure);
000260  a901              ADD      r1,sp,#4
000262  486c              LDR      r0,|L1.1044|
000264  f7fffffe          BL       GPIO_Init
;;;148    	GPIO_ResetBits(GPIOD, GPIO_Pin_0);   // led indicator
000268  2101              MOVS     r1,#1
00026a  486a              LDR      r0,|L1.1044|
00026c  f7fffffe          BL       GPIO_ResetBits
;;;149    	GPIO_ResetBits(GPIOD, GPIO_Pin_10);  // default direction
000270  f44f6180          MOV      r1,#0x400
000274  4867              LDR      r0,|L1.1044|
000276  f7fffffe          BL       GPIO_ResetBits
;;;150    	GPIO_ResetBits(GPIOD, GPIO_Pin_11);
00027a  f44f6100          MOV      r1,#0x800
00027e  4865              LDR      r0,|L1.1044|
000280  f7fffffe          BL       GPIO_ResetBits
;;;151    	
;;;152    	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
000284  2002              MOVS     r0,#2
000286  f88d0008          STRB     r0,[sp,#8]
;;;153    	GPIO_InitStructure.GPIO_Pin	 = GPIO_Pin_8;
00028a  01c0              LSLS     r0,r0,#7
00028c  9001              STR      r0,[sp,#4]
;;;154    	GPIO_Init(GPIOA, &GPIO_InitStructure);
00028e  a901              ADD      r1,sp,#4
000290  485e              LDR      r0,|L1.1036|
000292  f7fffffe          BL       GPIO_Init
;;;155    	GPIO_Init(GPIOC, &GPIO_InitStructure);
000296  a901              ADD      r1,sp,#4
000298  4864              LDR      r0,|L1.1068|
00029a  f7fffffe          BL       GPIO_Init
;;;156    	GPIO_PinAFConfig(GPIOA, GPIO_PinSource8, GPIO_AF_TIM1);
00029e  2201              MOVS     r2,#1
0002a0  2108              MOVS     r1,#8
0002a2  485a              LDR      r0,|L1.1036|
0002a4  f7fffffe          BL       GPIO_PinAFConfig
;;;157    	GPIO_PinAFConfig(GPIOC, GPIO_PinSource8, GPIO_AF_TIM8);
0002a8  2203              MOVS     r2,#3
0002aa  2108              MOVS     r1,#8
0002ac  485f              LDR      r0,|L1.1068|
0002ae  f7fffffe          BL       GPIO_PinAFConfig
;;;158    	
;;;159    	/* Set the specified timer configuration */
;;;160    	TIM_TimeBaseStructure.TIM_Period 	= 20u;
0002b2  2014              MOVS     r0,#0x14
0002b4  9009              STR      r0,[sp,#0x24]
;;;161    	TIM_TimeBaseStructure.TIM_Prescaler = 0xffffu;
0002b6  f64f70ff          MOV      r0,#0xffff
0002ba  f8ad0020          STRH     r0,[sp,#0x20]
;;;162    	TIM_TimeBaseStructure.TIM_ClockDivision = TIM_CKD_DIV1;
0002be  2000              MOVS     r0,#0
0002c0  f8ad0028          STRH     r0,[sp,#0x28]
;;;163    	TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;
0002c4  f8ad0022          STRH     r0,[sp,#0x22]
;;;164    	TIM_TimeBaseStructure.TIM_RepetitionCounter = 0;
0002c8  f88d002a          STRB     r0,[sp,#0x2a]
;;;165    	TIM_TimeBaseInit(TIM1, &TIM_TimeBaseStructure);
0002cc  a908              ADD      r1,sp,#0x20
0002ce  4858              LDR      r0,|L1.1072|
0002d0  f7fffffe          BL       TIM_TimeBaseInit
;;;166    	TIM_TimeBaseInit(TIM8, &TIM_TimeBaseStructure);
0002d4  a908              ADD      r1,sp,#0x20
0002d6  4857              LDR      r0,|L1.1076|
0002d8  f7fffffe          BL       TIM_TimeBaseInit
;;;167    	
;;;168    	/* Duty circle 50%. Vary the frequence by change TIM1->PSC */
;;;169    	TIM_OCInitStructure.TIM_OCMode = TIM_OCMode_PWM1;
0002dc  2060              MOVS     r0,#0x60
0002de  f8ad000c          STRH     r0,[sp,#0xc]
;;;170    	TIM_OCInitStructure.TIM_OutputState = TIM_OutputState_Enable;
0002e2  2001              MOVS     r0,#1
0002e4  f8ad000e          STRH     r0,[sp,#0xe]
;;;171    	TIM_OCInitStructure.TIM_OutputNState = TIM_OutputNState_Disable;
0002e8  2000              MOVS     r0,#0
0002ea  f8ad0010          STRH     r0,[sp,#0x10]
;;;172    	TIM_OCInitStructure.TIM_Pulse = 10u;
0002ee  200a              MOVS     r0,#0xa
0002f0  9005              STR      r0,[sp,#0x14]
;;;173    	TIM_OCInitStructure.TIM_OCPolarity = TIM_OCPolarity_Low;
0002f2  2002              MOVS     r0,#2
0002f4  f8ad0018          STRH     r0,[sp,#0x18]
;;;174    	TIM_OCInitStructure.TIM_OCNPolarity = TIM_OCPolarity_High;
0002f8  2000              MOVS     r0,#0
0002fa  f8ad001a          STRH     r0,[sp,#0x1a]
;;;175    	TIM_OCInitStructure.TIM_OCIdleState = TIM_OCIdleState_Reset;
0002fe  f8ad001c          STRH     r0,[sp,#0x1c]
;;;176    	TIM_OCInitStructure.TIM_OCNIdleState = TIM_OCNIdleState_Set;
000302  f44f7000          MOV      r0,#0x200
000306  f8ad001e          STRH     r0,[sp,#0x1e]
;;;177    	TIM_OC1Init(TIM1, &TIM_OCInitStructure);
00030a  a903              ADD      r1,sp,#0xc
00030c  4848              LDR      r0,|L1.1072|
00030e  f7fffffe          BL       TIM_OC1Init
;;;178    	TIM_OC3Init(TIM8, &TIM_OCInitStructure);
000312  a903              ADD      r1,sp,#0xc
000314  4847              LDR      r0,|L1.1076|
000316  f7fffffe          BL       TIM_OC3Init
;;;179    	TIM_OC1PreloadConfig(TIM1, TIM_OCPreload_Enable);
00031a  2108              MOVS     r1,#8
00031c  4844              LDR      r0,|L1.1072|
00031e  f7fffffe          BL       TIM_OC1PreloadConfig
;;;180    	TIM_OC3PreloadConfig(TIM8, TIM_OCPreload_Enable);
000322  2108              MOVS     r1,#8
000324  4843              LDR      r0,|L1.1076|
000326  f7fffffe          BL       TIM_OC3PreloadConfig
;;;181    	
;;;182    	TIM_Cmd(TIM1, ENABLE);
00032a  2101              MOVS     r1,#1
00032c  4840              LDR      r0,|L1.1072|
00032e  f7fffffe          BL       TIM_Cmd
;;;183    	TIM_Cmd(TIM8, ENABLE);
000332  2101              MOVS     r1,#1
000334  483f              LDR      r0,|L1.1076|
000336  f7fffffe          BL       TIM_Cmd
;;;184    	//TIM_CtrlPWMOutputs(TIM1, ENABLE);
;;;185    	TIM_CtrlPWMOutputs(TIM8, ENABLE);
00033a  2101              MOVS     r1,#1
00033c  483d              LDR      r0,|L1.1076|
00033e  f7fffffe          BL       TIM_CtrlPWMOutputs
;;;186    }
000342  b00b              ADD      sp,sp,#0x2c
000344  bd00              POP      {pc}
;;;187    
                          ENDP

                  QEPInit PROC
;;;197     */
;;;198    static void QEPInit(void)
000346  b500              PUSH     {lr}
;;;199    {
000348  b087              SUB      sp,sp,#0x1c
;;;200    	GPIO_InitTypeDef GPIO_InitStructure;
;;;201    	TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;  
;;;202    	//TIM_ICInitTypeDef TIM_ICInitStructure;
;;;203    	EXTI_InitTypeDef EXTI_InitStructure;
;;;204    
;;;205    	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB, ENABLE);
00034a  2101              MOVS     r1,#1
00034c  2002              MOVS     r0,#2
00034e  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;206    	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOD, ENABLE);
000352  2101              MOVS     r1,#1
000354  2008              MOVS     r0,#8
000356  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;207    	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM2,  ENABLE);
00035a  2101              MOVS     r1,#1
00035c  4608              MOV      r0,r1
00035e  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;208    	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM3,  ENABLE);
000362  2101              MOVS     r1,#1
000364  2002              MOVS     r0,#2
000366  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;209    	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM4,  ENABLE);
00036a  2101              MOVS     r1,#1
00036c  2004              MOVS     r0,#4
00036e  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;210    	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM5,  ENABLE);
000372  2101              MOVS     r1,#1
000374  2008              MOVS     r0,#8
000376  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;211    	/* Enable SYSCFG clock */
;;;212    	RCC_APB2PeriphClockCmd(RCC_APB2Periph_SYSCFG, ENABLE);  
00037a  2101              MOVS     r1,#1
00037c  0388              LSLS     r0,r1,#14
00037e  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;213    
;;;214    	/* Configure encoder input */
;;;215    	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_25MHz;
000382  2001              MOVS     r0,#1
000384  f88d0019          STRB     r0,[sp,#0x19]
;;;216    	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
000388  2002              MOVS     r0,#2
00038a  f88d0018          STRB     r0,[sp,#0x18]
;;;217    	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
00038e  2000              MOVS     r0,#0
000390  f88d001a          STRB     r0,[sp,#0x1a]
;;;218    	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
000394  2001              MOVS     r0,#1
000396  f88d001b          STRB     r0,[sp,#0x1b]
;;;219    	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4 | GPIO_Pin_5;
00039a  2030              MOVS     r0,#0x30
00039c  9005              STR      r0,[sp,#0x14]
;;;220    	GPIO_Init(GPIOB, &GPIO_InitStructure);
00039e  a905              ADD      r1,sp,#0x14
0003a0  4825              LDR      r0,|L1.1080|
0003a2  f7fffffe          BL       GPIO_Init
;;;221    	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_12 | GPIO_Pin_13;
0003a6  f44f5040          MOV      r0,#0x3000
0003aa  9005              STR      r0,[sp,#0x14]
;;;222    	GPIO_Init(GPIOD, &GPIO_InitStructure);
0003ac  a905              ADD      r1,sp,#0x14
0003ae  4819              LDR      r0,|L1.1044|
0003b0  f7fffffe          BL       GPIO_Init
;;;223    	
;;;224    	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
0003b4  2000              MOVS     r0,#0
0003b6  f88d0018          STRB     r0,[sp,#0x18]
;;;225    	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3;
0003ba  2008              MOVS     r0,#8
0003bc  9005              STR      r0,[sp,#0x14]
;;;226    	GPIO_Init(GPIOB, &GPIO_InitStructure);
0003be  a905              ADD      r1,sp,#0x14
0003c0  481d              LDR      r0,|L1.1080|
0003c2  f7fffffe          BL       GPIO_Init
;;;227    	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_14;
0003c6  f44f4080          MOV      r0,#0x4000
0003ca  9005              STR      r0,[sp,#0x14]
;;;228    	GPIO_Init(GPIOD, &GPIO_InitStructure);
0003cc  a905              ADD      r1,sp,#0x14
0003ce  4811              LDR      r0,|L1.1044|
0003d0  f7fffffe          BL       GPIO_Init
;;;229    	
;;;230    	GPIO_PinAFConfig(GPIOB,GPIO_PinSource4,GPIO_AF_TIM3);
0003d4  2202              MOVS     r2,#2
0003d6  2104              MOVS     r1,#4
0003d8  4817              LDR      r0,|L1.1080|
0003da  f7fffffe          BL       GPIO_PinAFConfig
;;;231      GPIO_PinAFConfig(GPIOB,GPIO_PinSource5,GPIO_AF_TIM3);
0003de  2202              MOVS     r2,#2
0003e0  2105              MOVS     r1,#5
0003e2  4815              LDR      r0,|L1.1080|
0003e4  f7fffffe          BL       GPIO_PinAFConfig
;;;232    	GPIO_PinAFConfig(GPIOD,GPIO_PinSource12,GPIO_AF_TIM4);
0003e8  2202              MOVS     r2,#2
0003ea  210c              MOVS     r1,#0xc
0003ec  4809              LDR      r0,|L1.1044|
0003ee  f7fffffe          BL       GPIO_PinAFConfig
;;;233      GPIO_PinAFConfig(GPIOD,GPIO_PinSource13,GPIO_AF_TIM4);
0003f2  2202              MOVS     r2,#2
0003f4  210d              MOVS     r1,#0xd
0003f6  4807              LDR      r0,|L1.1044|
0003f8  f7fffffe          BL       GPIO_PinAFConfig
;;;234    	/* Connect EXTI Line to PB3 & PD14 Pin */
;;;235    	SYSCFG_EXTILineConfig(EXTI_PortSourceGPIOB, EXTI_PinSource3);
0003fc  2103              MOVS     r1,#3
0003fe  2001              MOVS     r0,#1
000400  e01c              B        |L1.1084|
000402  0000              DCW      0x0000
                  |L1.1028|
                          DCD      0xe000ed18
                  |L1.1032|
                          DCD      0xe000e400
                  |L1.1036|
                          DCD      0x40020000
                  |L1.1040|
                          DCD      0x40011000
                  |L1.1044|
                          DCD      0x40020c00
                  |L1.1048|
                          DCD      0x40004800
                  |L1.1052|
                          DCD      0x40001400
                  |L1.1056|
                          DCD      0x40001000
                  |L1.1060|
000424  413e79e8          DCFS     0x413e79e8 ; 11.904762268066406
                  |L1.1064|
                          DCD      0x0007a120
                  |L1.1068|
                          DCD      0x40020800
                  |L1.1072|
                          DCD      0x40010000
                  |L1.1076|
                          DCD      0x40010400
                  |L1.1080|
                          DCD      0x40020400
                  |L1.1084|
00043c  f7fffffe          BL       SYSCFG_EXTILineConfig
;;;236    	SYSCFG_EXTILineConfig(EXTI_PortSourceGPIOD, EXTI_PinSource14);
000440  210e              MOVS     r1,#0xe
000442  2003              MOVS     r0,#3
000444  f7fffffe          BL       SYSCFG_EXTILineConfig
;;;237    
;;;238    	/* Timer configuration in Encoder mode */ 
;;;239    	//TIM_DeInit(TIM3);
;;;240    	TIM_TimeBaseStructure.TIM_Prescaler = 0; 			// No prescaling 
000448  2000              MOVS     r0,#0
00044a  f8ad0008          STRH     r0,[sp,#8]
;;;241    	TIM_TimeBaseStructure.TIM_Period 	= 0xffffu; 
00044e  f64f70ff          MOV      r0,#0xffff
000452  9003              STR      r0,[sp,#0xc]
;;;242    	TIM_TimeBaseStructure.TIM_ClockDivision = TIM_CKD_DIV1;
000454  2000              MOVS     r0,#0
000456  f8ad0010          STRH     r0,[sp,#0x10]
;;;243    	TIM_TimeBaseStructure.TIM_CounterMode 	= TIM_CounterMode_Up;   
00045a  f8ad000a          STRH     r0,[sp,#0xa]
;;;244    	TIM_TimeBaseStructure.TIM_RepetitionCounter = 0;
00045e  f88d0012          STRB     r0,[sp,#0x12]
;;;245    	TIM_TimeBaseInit(TIM2, &TIM_TimeBaseStructure);
000462  a902              ADD      r1,sp,#8
000464  f04f4080          MOV      r0,#0x40000000
000468  f7fffffe          BL       TIM_TimeBaseInit
;;;246    	TIM_TimeBaseInit(TIM3, &TIM_TimeBaseStructure);
00046c  a902              ADD      r1,sp,#8
00046e  488d              LDR      r0,|L1.1700|
000470  f7fffffe          BL       TIM_TimeBaseInit
;;;247    	TIM_TimeBaseInit(TIM4, &TIM_TimeBaseStructure);
000474  a902              ADD      r1,sp,#8
000476  488c              LDR      r0,|L1.1704|
000478  f7fffffe          BL       TIM_TimeBaseInit
;;;248    	TIM_TimeBaseInit(TIM5, &TIM_TimeBaseStructure);
00047c  a902              ADD      r1,sp,#8
00047e  488b              LDR      r0,|L1.1708|
000480  f7fffffe          BL       TIM_TimeBaseInit
;;;249    	
;;;250    	/* TIM3 & TIM4 is configured as Master */
;;;251    	TIM_SelectOutputTrigger(TIM3, TIM_TRGOSource_Update);
000484  2120              MOVS     r1,#0x20
000486  4887              LDR      r0,|L1.1700|
000488  f7fffffe          BL       TIM_SelectOutputTrigger
;;;252    	TIM_SelectMasterSlaveMode(TIM3, TIM_MasterSlaveMode_Enable);
00048c  2180              MOVS     r1,#0x80
00048e  4885              LDR      r0,|L1.1700|
000490  f7fffffe          BL       TIM_SelectMasterSlaveMode
;;;253    	TIM_SelectOutputTrigger(TIM4, TIM_TRGOSource_Update);
000494  2120              MOVS     r1,#0x20
000496  4884              LDR      r0,|L1.1704|
000498  f7fffffe          BL       TIM_SelectOutputTrigger
;;;254    	TIM_SelectMasterSlaveMode(TIM4, TIM_MasterSlaveMode_Enable);
00049c  2180              MOVS     r1,#0x80
00049e  4882              LDR      r0,|L1.1704|
0004a0  f7fffffe          BL       TIM_SelectMasterSlaveMode
;;;255    	/* TIM2 & TIM5 is configured as Slave */
;;;256    	TIM_SelectInputTrigger(TIM2, TIM_TS_ITR2);
0004a4  2120              MOVS     r1,#0x20
0004a6  0648              LSLS     r0,r1,#25
0004a8  f7fffffe          BL       TIM_SelectInputTrigger
;;;257    	TIM_SelectSlaveMode(TIM2, TIM_SlaveMode_External1);
0004ac  2107              MOVS     r1,#7
0004ae  f04f4080          MOV      r0,#0x40000000
0004b2  f7fffffe          BL       TIM_SelectSlaveMode
;;;258    	TIM_ITRxExternalClockConfig(TIM2, TIM_TS_ITR2);
0004b6  2120              MOVS     r1,#0x20
0004b8  0648              LSLS     r0,r1,#25
0004ba  f7fffffe          BL       TIM_ITRxExternalClockConfig
;;;259    	TIM_SelectInputTrigger(TIM5, TIM_TS_ITR2);
0004be  2120              MOVS     r1,#0x20
0004c0  487a              LDR      r0,|L1.1708|
0004c2  f7fffffe          BL       TIM_SelectInputTrigger
;;;260    	TIM_SelectSlaveMode(TIM5, TIM_SlaveMode_External1);
0004c6  2107              MOVS     r1,#7
0004c8  4878              LDR      r0,|L1.1708|
0004ca  f7fffffe          BL       TIM_SelectSlaveMode
;;;261    	TIM_ITRxExternalClockConfig(TIM5, TIM_TS_ITR2);
0004ce  2120              MOVS     r1,#0x20
0004d0  4876              LDR      r0,|L1.1708|
0004d2  f7fffffe          BL       TIM_ITRxExternalClockConfig
;;;262    	
;;;263    	/* TIM3 & TIM4 is configured as QEP I/F */
;;;264    	TIM_EncoderInterfaceConfig(TIM3, TIM_EncoderMode_TI12, TIM_ICPolarity_Rising, TIM_ICPolarity_Rising);
0004d6  2300              MOVS     r3,#0
0004d8  461a              MOV      r2,r3
0004da  2103              MOVS     r1,#3
0004dc  4871              LDR      r0,|L1.1700|
0004de  f7fffffe          BL       TIM_EncoderInterfaceConfig
;;;265    	TIM_EncoderInterfaceConfig(TIM4, TIM_EncoderMode_TI12, TIM_ICPolarity_Rising, TIM_ICPolarity_Rising);
0004e2  2300              MOVS     r3,#0
0004e4  461a              MOV      r2,r3
0004e6  2103              MOVS     r1,#3
0004e8  486f              LDR      r0,|L1.1704|
0004ea  f7fffffe          BL       TIM_EncoderInterfaceConfig
;;;266    	
;;;267    	TIM3->CCMR1 |= (TIM_CCMR1_IC1F & (1uL << 4 ));
0004ee  486d              LDR      r0,|L1.1700|
0004f0  3018              ADDS     r0,r0,#0x18
0004f2  8800              LDRH     r0,[r0,#0]
0004f4  f0400010          ORR      r0,r0,#0x10
0004f8  496a              LDR      r1,|L1.1700|
0004fa  3118              ADDS     r1,r1,#0x18
0004fc  8008              STRH     r0,[r1,#0]
;;;268    	TIM3->CCMR1 |= (TIM_CCMR1_IC2F & (1uL << 12));
0004fe  4608              MOV      r0,r1
000500  8800              LDRH     r0,[r0,#0]
000502  f4405080          ORR      r0,r0,#0x1000
000506  8008              STRH     r0,[r1,#0]
;;;269    	TIM4->CCMR1 |= (TIM_CCMR1_IC1F & (3uL << 4 ));
000508  4867              LDR      r0,|L1.1704|
00050a  3018              ADDS     r0,r0,#0x18
00050c  8800              LDRH     r0,[r0,#0]
00050e  f0400030          ORR      r0,r0,#0x30
000512  4965              LDR      r1,|L1.1704|
000514  3118              ADDS     r1,r1,#0x18
000516  8008              STRH     r0,[r1,#0]
;;;270    	TIM4->CCMR1 |= (TIM_CCMR1_IC2F & (3uL << 12));
000518  4608              MOV      r0,r1
00051a  8800              LDRH     r0,[r0,#0]
00051c  f4405040          ORR      r0,r0,#0x3000
000520  8008              STRH     r0,[r1,#0]
;;;271    	
;;;272    	/* EXTI */
;;;273    	EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt;
000522  2000              MOVS     r0,#0
000524  f88d0004          STRB     r0,[sp,#4]
;;;274    	EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Rising;  
000528  2008              MOVS     r0,#8
00052a  f88d0005          STRB     r0,[sp,#5]
;;;275    	EXTI_InitStructure.EXTI_LineCmd = ENABLE;
00052e  2001              MOVS     r0,#1
000530  f88d0006          STRB     r0,[sp,#6]
;;;276    	EXTI_InitStructure.EXTI_Line = EXTI_Line3;
000534  2008              MOVS     r0,#8
000536  9000              STR      r0,[sp,#0]
;;;277    	EXTI_Init(&EXTI_InitStructure);
000538  4668              MOV      r0,sp
00053a  f7fffffe          BL       EXTI_Init
;;;278    	EXTI_InitStructure.EXTI_Line = EXTI_Line14;
00053e  f44f4080          MOV      r0,#0x4000
000542  9000              STR      r0,[sp,#0]
;;;279    	EXTI_Init(&EXTI_InitStructure);
000544  4668              MOV      r0,sp
000546  f7fffffe          BL       EXTI_Init
;;;280    	EXTI_ClearFlag(EXTI_Line3);
00054a  2008              MOVS     r0,#8
00054c  f7fffffe          BL       EXTI_ClearFlag
;;;281    	EXTI_ClearFlag(EXTI_Line14);
000550  f44f4080          MOV      r0,#0x4000
000554  f7fffffe          BL       EXTI_ClearFlag
;;;282    	NVIC_SetPriority(EXTI3_IRQn, ZPM1_RPIO);
000558  2102              MOVS     r1,#2
00055a  2009              MOVS     r0,#9
00055c  f7fffffe          BL       NVIC_SetPriority
;;;283    	NVIC_SetPriority(EXTI15_10_IRQn, ZPM2_PRIO);
000560  2103              MOVS     r1,#3
000562  2028              MOVS     r0,#0x28
000564  f7fffffe          BL       NVIC_SetPriority
;;;284    	NVIC_EnableIRQ(EXTI3_IRQn);
000568  2009              MOVS     r0,#9
00056a  f7fffffe          BL       NVIC_EnableIRQ
;;;285    	NVIC_EnableIRQ(EXTI15_10_IRQn);
00056e  2028              MOVS     r0,#0x28
000570  f7fffffe          BL       NVIC_EnableIRQ
;;;286    	
;;;287    	TIM_Cmd(TIM2, ENABLE);
000574  2101              MOVS     r1,#1
000576  0788              LSLS     r0,r1,#30
000578  f7fffffe          BL       TIM_Cmd
;;;288    	TIM_Cmd(TIM3, ENABLE);
00057c  2101              MOVS     r1,#1
00057e  4849              LDR      r0,|L1.1700|
000580  f7fffffe          BL       TIM_Cmd
;;;289    	TIM_Cmd(TIM4, ENABLE);
000584  2101              MOVS     r1,#1
000586  4848              LDR      r0,|L1.1704|
000588  f7fffffe          BL       TIM_Cmd
;;;290    	TIM_Cmd(TIM5, ENABLE);
00058c  2101              MOVS     r1,#1
00058e  4847              LDR      r0,|L1.1708|
000590  f7fffffe          BL       TIM_Cmd
;;;291    }
000594  b007              ADD      sp,sp,#0x1c
000596  bd00              POP      {pc}
;;;292    /* speed = SYS_CLK/(21*TIMx->PSC*PULSE_PER_ROTATION*REDUCTION_RATIO)*60 (r/min) */
                          ENDP

                  StepMotor_SpeedSet PROC
;;;293    void StepMotor_SpeedSet(StepMotor_CH channel, float speed)
000598  b9b0              CBNZ     r0,|L1.1480|
;;;294    {
;;;295    	if(channel == StepMotor_CH1)
;;;296    		TIM1->PSC = SYS_CLK*60.0f/(speed*21.0f*PULSE_PER_ROTATION*REDUCTION_RATIO);
00059a  eef30a05          VMOV.F32 s1,#21.00000000
00059e  ee600a20          VMUL.F32 s1,s0,s1
0005a2  ed9f1a43          VLDR     s2,|L1.1712|
0005a6  ee600a81          VMUL.F32 s1,s1,s2
0005aa  eeb31a0e          VMOV.F32 s2,#30.00000000
0005ae  ee600a81          VMUL.F32 s1,s1,s2
0005b2  ed9f1a40          VLDR     s2,|L1.1716|
0005b6  eec11a20          VDIV.F32 s3,s2,s1
0005ba  eefc0ae1          VCVT.U32.F32 s1,s3
0005be  ee101a90          VMOV     r1,s1
0005c2  4a3d              LDR      r2,|L1.1720|
0005c4  8511              STRH     r1,[r2,#0x28]
0005c6  e011              B        |L1.1516|
                  |L1.1480|
;;;297    	else
;;;298    		TIM8->PSC = SYS_CLK*60.0f/(speed*21.0f*PULSE_PER_ROTATION);
0005c8  eef30a05          VMOV.F32 s1,#21.00000000
0005cc  ee600a20          VMUL.F32 s1,s0,s1
0005d0  ed9f1a37          VLDR     s2,|L1.1712|
0005d4  ee600a81          VMUL.F32 s1,s1,s2
0005d8  ed9f1a36          VLDR     s2,|L1.1716|
0005dc  eec11a20          VDIV.F32 s3,s2,s1
0005e0  eefc0ae1          VCVT.U32.F32 s1,s3
0005e4  ee101a90          VMOV     r1,s1
0005e8  4a34              LDR      r2,|L1.1724|
0005ea  8011              STRH     r1,[r2,#0]
                  |L1.1516|
;;;299    }
0005ec  4770              BX       lr
;;;300    
                          ENDP

                  SysTickInit PROC
;;;301    void SysTickInit(void)
0005ee  b51f              PUSH     {r0-r4,lr}
;;;302    {
;;;303    	RCC_ClocksTypeDef RCC_Clocks;
;;;304    	/* Configure the Interruption Priority Group */
;;;305    	NVIC_SetPriorityGrouping(NVIC_PriorityGroup_4 >> 8);
0005f0  2003              MOVS     r0,#3
0005f2  4602              MOV      r2,r0
0005f4  4b32              LDR      r3,|L1.1728|
0005f6  6819              LDR      r1,[r3,#0]
0005f8  f64f03ff          MOV      r3,#0xf8ff
0005fc  4019              ANDS     r1,r1,r3
0005fe  4b31              LDR      r3,|L1.1732|
000600  430b              ORRS     r3,r3,r1
000602  ea432102          ORR      r1,r3,r2,LSL #8
000606  4b2e              LDR      r3,|L1.1728|
000608  6019              STR      r1,[r3,#0]
00060a  bf00              NOP      
;;;306    	/* Configure Systick clock source as HCLK */
;;;307    	SysTick_CLKSourceConfig(SysTick_CLKSource_HCLK);
00060c  2004              MOVS     r0,#4
00060e  f7fffffe          BL       SysTick_CLKSourceConfig
;;;308    	/* SystTick configuration: an interrupt every 10ms */
;;;309    	RCC_GetClocksFreq(&RCC_Clocks);
000612  4668              MOV      r0,sp
000614  f7fffffe          BL       RCC_GetClocksFreq
;;;310    	SysTick_Config(RCC_Clocks.HCLK_Frequency / TICKS_PER_SEC);
000618  2164              MOVS     r1,#0x64
00061a  9801              LDR      r0,[sp,#4]
00061c  fbb0f4f1          UDIV     r4,r0,r1
000620  f1b47f80          CMP      r4,#0x1000000
000624  d300              BCC      |L1.1576|
000626  e011              B        |L1.1612|
                  |L1.1576|
000628  f024407f          BIC      r0,r4,#0xff000000
00062c  1e40              SUBS     r0,r0,#1
00062e  f04f21e0          MOV      r1,#0xe000e000
000632  6148              STR      r0,[r1,#0x14]
000634  210f              MOVS     r1,#0xf
000636  f04f30ff          MOV      r0,#0xffffffff
00063a  f7fffffe          BL       NVIC_SetPriority
00063e  2000              MOVS     r0,#0
000640  f04f21e0          MOV      r1,#0xe000e000
000644  6188              STR      r0,[r1,#0x18]
000646  2007              MOVS     r0,#7
000648  6108              STR      r0,[r1,#0x10]
00064a  bf00              NOP      
                  |L1.1612|
;;;311    	NVIC_SetPriority(SysTick_IRQn, SYSTICK_PRIO);
00064c  2107              MOVS     r1,#7
00064e  f04f30ff          MOV      r0,#0xffffffff
000652  f7fffffe          BL       NVIC_SetPriority
;;;312    }
000656  bd1f              POP      {r0-r4,pc}
;;;313    
                          ENDP

                  dev_Init PROC
;;;314    void dev_Init(void)
000658  b510              PUSH     {r4,lr}
;;;315    {
;;;316    	//SysTickInit();加入了嵌入式的操作系统，用到了滴答定时器
;;;317    	Timer6Init();
00065a  f7fffffe          BL       Timer6Init
;;;318    	Timer7Init();
00065e  f7fffffe          BL       Timer7Init
;;;319    	Delay_ms(10);
000662  200a              MOVS     r0,#0xa
000664  f7fffffe          BL       Delay_ms
;;;320    	PWMInit();
000668  f7fffffe          BL       PWMInit
;;;321    	StepMotor_SpeedSet(StepMotor_CH1,H_DEFAULT_SPD);
00066c  ed9f0a16          VLDR     s0,|L1.1736|
000670  2000              MOVS     r0,#0
000672  f7fffffe          BL       StepMotor_SpeedSet
;;;322    	StepMotor_SpeedSet(StepMotor_CH2,V_DEFAULT_SPD);
000676  ed9f0a15          VLDR     s0,|L1.1740|
00067a  2001              MOVS     r0,#1
00067c  f7fffffe          BL       StepMotor_SpeedSet
;;;323    	QEPInit();
000680  f7fffffe          BL       QEPInit
;;;324    	usart1_Init();
000684  f7fffffe          BL       usart1_Init
;;;325    	usart3_Init();
000688  f7fffffe          BL       usart3_Init
;;;326    	//sys_msleep(10);
;;;327    }
00068c  bd10              POP      {r4,pc}
                          ENDP

                  NVIC_EnableIRQ PROC
;;;1070    */
;;;1071   static __INLINE void NVIC_EnableIRQ(IRQn_Type IRQn)
00068e  f000021f          AND      r2,r0,#0x1f
;;;1072   {
;;;1073   /*  NVIC->ISER[((uint32_t)(IRQn) >> 5)] = (1 << ((uint32_t)(IRQn) & 0x1F));  enable interrupt */
;;;1074     NVIC->ISER[(uint32_t)((int32_t)IRQn) >> 5] = (uint32_t)(1 << ((uint32_t)((int32_t)IRQn) & (uint32_t)0x1F)); /* enable interrupt */
000692  2101              MOVS     r1,#1
000694  4091              LSLS     r1,r1,r2
000696  0942              LSRS     r2,r0,#5
000698  0092              LSLS     r2,r2,#2
00069a  f10222e0          ADD      r2,r2,#0xe000e000
00069e  f8c21100          STR      r1,[r2,#0x100]
;;;1075   }
0006a2  4770              BX       lr
;;;1076   
                          ENDP

                  |L1.1700|
                          DCD      0x40000400
                  |L1.1704|
                          DCD      0x40000800
                  |L1.1708|
                          DCD      0x40000c00
                  |L1.1712|
0006b0  46c80000          DCFS     0x46c80000 ; 25600
                  |L1.1716|
0006b4  50163426          DCFS     0x50163426 ; 10080000000
                  |L1.1720|
                          DCD      0x40010000
                  |L1.1724|
                          DCD      0x40010428
                  |L1.1728|
                          DCD      0xe000ed0c
                  |L1.1732|
                          DCD      0x05fa0000
                  |L1.1736|
0006c8  3dcccccd          DCFS     0x3dcccccd ; 0.10000000149011612
                  |L1.1740|
0006cc  42c80000          DCFS     0x42c80000 ; 100

                          AREA ||.data||, DATA, ALIGN=2

                  motor_spd
000000  3dcccccd          DCFS     0x3dcccccd ; 0.10000000149011612
000004  42c80000          DCFS     0x42c80000 ; 100

;*** Start embedded assembler ***

#line 1 "..\\src\\laser\\dev.c"
	AREA ||.emb_text||, CODE
	THUMB
	EXPORT |__asm___5_dev_c_80402f18____REV16|
#line 114 "..\\..\\libraries\\CMSIS\\Include\\core_cmInstr.h"
|__asm___5_dev_c_80402f18____REV16| PROC
#line 115

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.emb_text||, CODE
	THUMB
	EXPORT |__asm___5_dev_c_80402f18____REVSH|
#line 128
|__asm___5_dev_c_80402f18____REVSH| PROC
#line 129

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
